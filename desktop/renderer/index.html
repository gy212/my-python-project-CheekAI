<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>CheekAI Desktop</title>
    <link rel="stylesheet" href="./style.css" />
  </head>
  <body>
    <div id="title-bar">
      <div class="drag-region">CheekAI</div>
      <div class="window-controls">
        <button id="btn-min" class="win-control" title="Minimize">
          <svg width="10" height="1" viewBox="0 0 10 1"><path d="M0 0h10v1H0z" fill="currentColor"/></svg>
        </button>
        <button id="btn-restore" class="win-control" title="Restore">
          <svg width="10" height="10" viewBox="0 0 10 10"><path d="M3 3v7h7V3H3zm6 6H4V4h5v5zM1 1v7h1V2h7V1H1z" fill="currentColor"/></svg>
        </button>
        <button id="btn-max" class="win-control" title="Maximize">
          <svg width="10" height="10" viewBox="0 0 10 10"><path d="M0 0h10v10H0V0zm1 1v8h8V1H1z" fill="currentColor"/></svg>
        </button>
        <button id="btn-close" class="win-control" title="Close">
          <svg width="10" height="10" viewBox="0 0 10 10"><path d="M1 0L0 1l4 4-4 4 1 1 4-4 4 4 1-1-4-4 4-4-1-1-4 4-4-4z" fill="currentColor"/></svg>
        </button>
      </div>
    </div>
    <div class="app-shell">
      <div class="main-area">
        <main class="content-grid">
          <section class="column column-controls">
            <article class="surface card control-card">
              <header class="card-heading">
                <p class="eyebrow">检测控制</p>
                <h1>运行参数</h1>
                <p class="card-subtitle">敏感度关联 chunk 配置 · LLM 提供商管理</p>
              </header>
              <div class="form-grid">
                <div class="form-field">
                  <label class="form-label" for="sensitivity">敏感度</label>
                  <select id="sensitivity" class="input-control">
                    <option value="low">低敏感</option>
                    <option value="medium" selected>中敏感</option>
                    <option value="high">高敏感</option>
                  </select>
                </div>
                <div class="form-field">
                  <label class="form-label" for="provider">判别模型</label>
                  <select id="provider" class="input-control">
                    <option value="">任意 LLM 判别</option>
                  </select>
                </div>
                <div class="form-field span-2">
                  <span class="form-label">GLM API Key</span>
                  <div class="input-inline">
                    <input id="glmKey" class="input-control" placeholder="sk-..." />
                    <button id="saveGlm" class="btn-secondary" type="button">保存GLM密钥</button>
                  </div>
                </div>
                <div class="form-field span-2 file-field">
                  <span class="form-label">文本预处理</span>
                  <div class="file-picker">
                    <button id="fileTrigger" class="btn-secondary" type="button">选择文件</button>
                    <span id="fileName" class="file-name">未选择任何文件</span>
                    <input type="file" id="fileInput" class="file-input-hidden" />
                  </div>
                </div>
                <div class="form-actions span-2 action-row">
                  <button id="uploadBtn" class="btn-secondary" type="button">预处理并填充</button>
                  <button id="detectButton" class="btn-primary" type="button">开始检测</button>
                </div>
              </div>
            </article>
            <article class="surface card input-card">
              <header class="card-heading">
                <p class="eyebrow">待检测文本</p>
                <h2>粘贴或上传内容</h2>
              </header>
              <textarea id="inputText" placeholder="输入或粘贴待检测文本..."></textarea>
            </article>
          </section>
          <section class="column column-results">
            <article class="surface card segments-card">
              <header class="card-heading">
                <div>
                  <p class="eyebrow">段落列表</p>
                  <h2>分段评分</h2>
                </div>
                <div class="card-actions">
                  <button id="exportJson" class="btn-link" type="button">导出 JSON</button>
                  <button id="exportCsv" class="btn-link" type="button">导出 CSV</button>
                </div>
              </header>
              <div id="segments" class="segments-grid"></div>
            </article>
            <article class="surface card batch-card">
              <header class="card-heading">
                <div>
                  <p class="eyebrow">批量任务</p>
                  <h2>处理进度</h2>
                </div>
              </header>
              <div id="batchSummary" class="batch-summary"></div>
              <div id="batchItems" class="batch-items"></div>
            </article>
            <article class="surface card structure-card">
              <header class="card-heading">
                <div>
                  <p class="eyebrow">结构预览</p>
                  <h2>段落映射</h2>
                </div>
                <div class="card-actions">
                  <button id="toggleStructured" class="btn-secondary ghost" type="button">显示 / 隐藏</button>
                  <button id="copyStructured" class="btn-secondary ghost" type="button">复制到文本框</button>
                </div>
              </header>
              <div id="structurePreview" class="structure-panel" style="display:none"></div>
            </article>
            <div id="summary" class="sr-only" aria-hidden="true"></div>
          </section>
        </main>
      </div>
    </div>
    <div id="loadingMask" class="loading-mask" role="status" aria-live="polite">
      <div class="spinner">
        <div class="dot"></div><div class="dot"></div><div class="dot"></div>
        <span id="loadingText">正在检测...</span>
      </div>
    </div>
    <script src="./index.js"></script>
  </body>
</html>
